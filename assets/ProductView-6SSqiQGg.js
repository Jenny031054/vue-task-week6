import{M as b}from"./bootstrap.esm-TTjMTX3M.js";import{_ as m,o as c,c as i,a as t,t as s,g,h as v,v as f,F as h,i as p,r as M,b as A}from"./index-u7S5IKh1.js";const y={props:["tempProduct"],data(){return{dashboardProductModal:null,qty:1}},watch:{tempProduct(){this.qty=1}},methods:{openModal(){this.dashboardProductModal.show()},closeModal(){this.dashboardProductModal.hide()},addCart(){console.log("內層emit",this.tempProduct.id),this.$emit("add-cart",this.tempProduct.id)}},mounted(){this.dashboardProductModal=new b(this.$refs.dashboardProductModal)}},I={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"dashboardProductModal"},E={class:"modal-dialog modal-xl",role:"document"},C={class:"modal-content border-0"},V={class:"modal-header bg-dark text-white"},$={class:"modal-title",id:"exampleModalLabel"},k=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),L={class:"modal-body"},T={class:"row"},x={class:"col-sm-6"},D=["src"],w={class:"col-sm-6"},U={class:"badge bg-primary rounded-pill"},N={key:0,class:"h5"},R={class:"h6"},q={class:"h5"},S={class:"input-group"},B=["value"];function j(a,e,o,r,d,u){return c(),i("div",I,[t("div",E,[t("div",C,[t("div",V,[t("h5",$,[t("span",null,s(o.tempProduct.title),1)]),k]),t("div",L,[t("div",T,[t("div",x,[t("img",{src:o.tempProduct.imageUrl,class:"img-fluid",alt:""},null,8,D)]),t("div",w,[t("span",U,s(o.tempProduct.category),1),t("p",null,"商品描述："+s(o.tempProduct.description),1),t("p",null,"商品內容："+s(o.tempProduct.content),1),o.tempProduct.origin_price===o.tempProduct.price?(c(),i("div",N,s(o.tempProduct.price)+" 元",1)):g("",!0),t("del",R,"原價 "+s(o.tempProduct.origin_price)+" 元",1),t("div",q,"現在只要 "+s(o.tempProduct.price)+" 元",1),t("div",null,[t("div",S,[v(t("select",{class:"form-select","onUpdate:modelValue":e[0]||(e[0]=l=>d.qty=l)},[(c(),i(h,null,p(20,l=>t("option",{value:l,key:l+12},s(l),9,B)),64))],512),[[f,d.qty]]),t("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=l=>u.addCart(o.tempProduct.id,d.qty))},"加入購物車")])])])])])])])],512)}const F=m(y,[["render",j]]);var _={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io/v2/api",VITE_APP_API_NAME:"jenny031054",BASE_URL:"/vue-task-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const O={components:{ProductDetailModal:F},data(){return{productList:[],productTemp:{}}},mounted(){const{VITE_APP_API_URL:a,VITE_APP_API_NAME:e}=_;this.$http.get(`${a}/${e}/products/all`).then(o=>{console.log(o),this.productList=o.data.products,console.log(_)})},methods:{addCart(a){const{VITE_APP_API_URL:e,VITE_APP_API_NAME:o}=_,r={data:{product_id:a,qty:1}};this.$http.post(`${e}/${o}/cart`,r).then(d=>{alert(d.data.message),console.log(d)})},getProductInfo(a,e){const{VITE_APP_API_URL:o,VITE_APP_API_NAME:r}=_;this.productTemp=e,this.$refs.productDetailModal.openModal(),this.$http.get(`${o}/${r}/product/${a}`).then(d=>{console.log(d.data)})}}},z={class:"container-fluid"},G=t("h1",null,"這裡是商品頁面",-1),H=t("hr",null,null,-1),J={class:"table align-middle"},K=t("thead",null,[t("th",null,"圖片"),t("th",null,"產品名稱"),t("th",null,"價格"),t("th",null,"產品細節"),t("th",null,"加入購物車")],-1),Q=["src"],W=["onClick"],X=["onClick"];function Y(a,e,o,r,d,u){const l=M("Product-Detail-Modal");return c(),i(h,null,[t("div",z,[G,H,t("table",J,[K,(c(!0),i(h,null,p(d.productList,n=>(c(),i("tbody",{key:n.id},[t("td",null,[t("img",{src:n.imageUrl,alt:"",height:"200",width:"200",class:"object-fit"},null,8,Q)]),t("td",null,s(n.title),1),t("td",null,s(n.price),1),t("td",null,[t("button",{class:"btn btn-secondary",type:"button",onClick:P=>u.getProductInfo(n.id,n)}," 查看產品細節 ",8,W)]),t("td",null,[t("button",{class:"btn btn-danger",type:"button",onClick:P=>u.addCart(n.id)},"加入購物車",8,X)])]))),128))])]),A(l,{onAddCart:u.addCart,"temp-product":d.productTemp,ref:"productDetailModal"},null,8,["onAddCart","temp-product"])],64)}const ot=m(O,[["render",Y]]);export{ot as default};
